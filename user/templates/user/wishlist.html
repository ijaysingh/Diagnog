<!-- To show the interested items for the user -->


{% block content %}
{% load static %}


<!doctype html>
<html class="no-js" lang="zxx">

<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Wishlist | DiagnoG - Med eCommerce</title>
    <meta name="robots" content="noindex, follow" />
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Place favicon.png in the root directory -->
    <link rel="shortcut icon" href="{% static 'favicons/3.svg' %}" type="image/x-icon" />

    <!-- css files -->
    {% include 'include/css.html' %}
    <!-- js files -->
    {% include 'include/js.html' %}
</head>

<body>
    <!--[if lte IE 9]>
        <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
    <![endif]-->

    <!-- Add your site or application content here -->

<!-- Body main wrapper start -->
<div class="body-wrapper">

    <!-- HEADER AREA START (header-3) -->
    {% include 'header/header.html' %}
    <!-- HEADER AREA END -->

    <!-- MOBILE MENU START -->
    <!-- MOBILE MENU END -->

    <!-- Utilize Cart Menu Start -->
    {% include 'widget/cart_menu.html' %}
    <!-- Utilize Cart Menu End -->

    <!-- Utilize Mobile Menu Start -->
    {% include 'header/mobile_menu.html' %}
    <!-- Utilize Mobile Menu End -->

    <div class="ltn__utilize-overlay"></div> <br> <br>

    <!-- BREADCRUMB AREA START -->
    <div class="ltn__breadcrumb-area text-left bg-overlay-white-30 bg-image "  data-bs-bg="{% static 'img/bg/14.jpg' %}">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="ltn__breadcrumb-inner">
                        <h1 class="page-title">Wishlist</h1>
                        <div class="ltn__breadcrumb-list">
                            <ul>
                                <li><a href="/"><span class="ltn__secondary-color"><i class="fas fa-home"></i></span> Home</a></li>
                                <li>Wishlist</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- BREADCRUMB AREA END -->

    <!-- WISHLIST AREA START -->
    <div class="liton__wishlist-area mb-105">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="shoping-cart-inner">
                        <div class="shoping-cart-table table-responsive update-table">
                            <table class="table" id="tableid">
                                <!-- <thead>
                                    <th class="cart-product-remove">X</th>
                                    <th class="cart-product-image">Image</th>
                                    <th class="cart-product-info">Title</th>
                                    <th class="cart-product-price">Price</th>
                                    <th class="cart-product-quantity">Quantity</th>
                                    <th class="cart-product-subtotal">Subtotal</th>
                                </thead> -->
                                <tbody>
                                    {% for item in wishlist %}
                                    <tr>
                                        <td class="cart-product-remove">
                                            <button type="button" class="close" aria-label="Close" data-id="{{ item.product.id }}" data-action="remove">
                                                <span aria-hidden="true">&times;</span>
                                            </button>
                                        </td>
                                        <td class="cart-product-image">
                                            <a href="{% url 'product_details' slug=item.product.slug %}"><img src="{{item.product.imgURL}}" alt="#"></a>
                                        </td>
                                        <td class="cart-product-info">
                                            <h4><a href="{% url 'product_details' slug=item.product.slug %}">{{ item.product.productName }}</a></h4>
                                        </td>
                                        <td class="cart-product-price">â‚¹{{item.product.discount_price}}</td>
                                        <td class="cart-product-stock">In Stock</td>
                                        <td class="cart-product-add-cart">
                                            <a class="submit-button-1 add-item" href="#" title="Add to Cart" data-id="{{ item.product.id }}" data-action="add" data-bs-toggle="modal" data-bs-target="#add_to_cart_modal">Add to Cart</a>
                                        </td>
                                    </tr>
                                    {% endfor %}
                                    {% if not wishlist %}
                                    <tr>
                                    <h4>Your wishlist is currently Empty. <br>
                                        Add items you want to purchase </h4>
                                    </tr>
                                    {% endif %}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- WISHLIST AREA END -->

    <!-- CALL TO ACTION START (call-to-action-6) -->
    {% include 'widget/call_to_action.html' %}
    <!-- CALL TO ACTION END -->

    <!-- FOOTER AREA START -->
    {% include 'footer/footer.html' %}
    <!-- FOOTER AREA END -->

        <!-- MODAL AREA START (Add To Cart Modal) -->
        <div class="ltn__modal-area ltn__add-to-cart-modal-area">
            <div class="modal fade" id="add_to_cart_modal" tabindex="-1">
                <div class="modal-dialog modal-md" role="document">
                    {% if prod %}
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-id="{{ prod.id }}" data-action="remove" data-bs-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                             <div class="ltn__quick-view-modal-inner">
                                 <div class="modal-product-item">
                                    <div class="row">
                                        <div class="col-12">
                                            <div class="modal-product-img">
                                                <img src="{{ prod.imgURL }}" alt="#">
                                            </div>
                                             <div class="modal-product-info">
                                                <h5><a href="{% url 'product_details' slug=prod.slug %}">{{ prod.productName }}</a></h5>
                                                <p class="added-cart"><i class="fa fa-check-circle"></i>  Successfully added to your Cart</p>
                                                <div class="btn-wrapper">
                                                    <a href="{% url 'cart' %}" class="theme-btn-1 btn btn-effect-1">View Cart</a>
                                                    <a href="{% url 'checkout' %}" class="theme-btn-2 btn btn-effect-2">Checkout</a>
                                                </div>
                                             </div>
                                             <!-- additional-info -->
                                             <div class="additional-info d-none">
                                                <p>We want to give you <b>10% discount</b> for your first order, <br>  Use discount code at checkout</p>
                                                <div class="payment-method">
                                                    <img src="img/icons/payment.png" alt="#">
                                                </div>
                                             </div>
                                        </div>
                                    </div>
                                 </div>
                             </div>
                        </div>
                    </div>
                    {% endif %}
                </div>
            </div>
        </div>
        <!-- MODAL AREA END -->
    
</div>  
</body>
<script>
    var auth = "{{request.user.is_authenticated}}"
</script>
<script src="{% static 'js/cart.js' %}"></script>
<script>
    $(document).on('click','.close',function(){
        var id = $(this).data('id');
        var action = $(this).data('action');
        console.log(id, action)
        $.ajax({
            url:'',
            type:'GET',
            data:{
                'id':id,
                'action': action
            },
            success:function(data){
                var old_table_data = document.getElementById('tableid'); // old table 
                var htmlObject = $(data); 
                var new_table_data = htmlObject.find("#tableid").html(); // new table
                old_table_data.innerHTML=new_table_data;

            },
            error:function(){
                console.log('error')
            },
        });
    });
    $(document).on('click','.add-item',function(){
        var id = $(this).data('id');
        var action = $(this).data('action');
        $.ajax({
            url:'',
            type:'GET',
            data:{
                'id':id,
                'action':action
            },
            success:function(data){
                $('#add_to_cart_modal .modal-dialog').html($('#add_to_cart_modal .modal-dialog',data));
                $('#add_to_cart_modal').modal('show');
            },
            error:function(){
                console.log('error')
            },
        });
    });
</script>
</html>




{% endblock %}